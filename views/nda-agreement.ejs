<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDA Agreement - Campaign Builder</title>
    <link rel="stylesheet" href="/css/tailwind.min.css">
    <style>
        .nda-content h2 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        .nda-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        .nda-content p {
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }
        .nda-content ul, .nda-content ol {
            margin-left: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .nda-content li {
            margin-bottom: 0.5rem;
        }
        .nda-content hr {
            margin: 1.5rem 0;
            border-color: #e5e7eb;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="max-w-4xl mx-auto py-4 sm:py-8 px-3 sm:px-4">
        <!-- Header -->
        <div class="bg-gradient-to-r from-indigo-900 to-indigo-600 rounded-t-lg p-4 sm:p-6 text-center">
            <h1 class="text-xl sm:text-3xl font-bold text-white">CAMPAIGN BUILDER</h1>
            <p class="text-indigo-100 mt-1 sm:mt-2 text-sm sm:text-base">Access, Confidentiality, Non-Disclosure & Privacy Agreement</p>
        </div>
        
        <!-- Agreement Content -->
        <div class="bg-white shadow-lg rounded-b-lg p-4 sm:p-8">
            <div class="bg-amber-50 border-l-4 border-amber-400 p-3 sm:p-4 mb-4 sm:mb-6">
                <p class="text-amber-800 font-medium text-sm sm:text-base">
                    <strong>REQUIRED BEFORE USE:</strong> By clicking "I Agree", you confirm you have read, understood, and agree to be legally bound by this Agreement before using the App.
                </p>
            </div>
            
            <div class="text-xs sm:text-sm text-gray-600 mb-4 sm:mb-6">
                <p><strong>Last updated:</strong> January 23, 2026</p>
                <p><strong>System / Application:</strong> Campaign Builder ("App")</p>
                <p><strong>Operator:</strong> Campaign Builder ("Operator", "we", "us", "our")</p>
                <p><strong>Contact for privacy questions:</strong> <a href="mailto:info@campaignbuilder.ca" class="text-indigo-600 hover:underline">info@campaignbuilder.ca</a></p>
            </div>
            
            <!-- Scrollable NDA Content -->
            <div class="nda-content max-h-64 sm:max-h-96 overflow-y-auto border rounded-lg p-3 sm:p-6 bg-gray-50 mb-4 sm:mb-6 text-sm sm:text-base">
                <h2>1. PURPOSE OF THE APP</h2>
                <p>1.1 Campaign Builder is a contact management and communications application intended to support authorized users performing campaign, outreach, volunteer, membership, organizational, and operational functions.</p>
                <p>1.2 The App is provided for internal and authorized use only, and must be used strictly in accordance with this Agreement and applicable laws.</p>

                <hr>

                <h2>2. DEFINITIONS</h2>
                <p>2.1 <strong>"App"</strong> means Campaign Builder, including all software, features, interfaces, forms, reports, dashboards, databases, and related systems.</p>
                <p>2.2 <strong>"Authorized Purpose"</strong> means using the App solely for lawful internal organizational purposes, including outreach, voter engagement, volunteer coordination, membership management, event planning, and other campaign-related functions authorized by an administrator.</p>
                <p>2.3 <strong>"Confidential Information"</strong> includes any and all information accessible through the App, whether personal or non-personal, including without limitation:</p>
                <ul class="list-disc">
                    <li>contact lists and records</li>
                    <li>supporter categories, tags, classifications, and notes</li>
                    <li>poll numbers, voting location notes, "who voted" indicators (if applicable)</li>
                    <li>outreach history, communications, scripts, event and fundraising details</li>
                    <li>reports, analytics, internal dashboards and internal strategy information</li>
                    <li>system settings, templates, workflows, and admin configurations</li>
                    <li>login credentials and account access permissions</li>
                    <li>any information derived from any of the above</li>
                </ul>
                <p>2.4 <strong>"Personal Information"</strong> means information about an identifiable individual, including name, contact details, address, and related identifiers, as defined under applicable privacy laws.</p>
                <p>2.5 <strong>"User"</strong> means any person granted access to the App, including volunteers, staff, board members, candidates, contractors, and other authorized representatives.</p>

                <hr>

                <h2>3. OWNERSHIP AND INTELLECTUAL PROPERTY</h2>
                <p>3.1 The User acknowledges and agrees that the App, all Platform Content, and the manner in which information is presented are the property of Campaign Builder and/or its licensors.</p>
                <p>3.2 Nothing in this Agreement grants the User any ownership rights of any kind.</p>

                <hr>

                <h2>4. PERMITTED USE</h2>
                <p>4.1 Campaign Builder grants the User a personal, non-transferable, non-exclusive, revocable right to access and use the App strictly for the Authorized Purpose and only to the extent permitted by the User's role and permissions.</p>
                <p>4.2 The User must only access information necessary to perform their authorized responsibilities.</p>

                <hr>

                <h2>5. RESTRICTIONS ON USE</h2>
                <p>5.1 The User agrees that they will not, directly or indirectly:</p>
                <p>(a) disclose, share, publish, transfer, sell, distribute, copy, export, screenshot, record, print, or transmit any Confidential Information except as explicitly authorized by an administrator and permitted by law;</p>
                <p>(b) compile or extract lists or reports for any purpose outside the Authorized Purpose;</p>
                <p>(c) create derivative works of, reverse engineer, decompile, disassemble, adapt, translate, modify, or otherwise attempt to derive the source code, architecture, or proprietary logic of the App;</p>
                <p>(d) access the App using another person's credentials or allow any person to access the App through the User's account;</p>
                <p>(e) attempt to bypass security controls, probe for vulnerabilities, disrupt service, introduce malware/bots/scripts, or interfere with App performance;</p>
                <p>(f) use the App for commercial purposes, personal gain, harassment, intimidation, unlawful communications, or any activity that violates applicable laws.</p>
                <p>5.2 These restrictions apply regardless of whether disclosure or copying is intentional or accidental.</p>

                <hr>

                <h2>6. CONFIDENTIALITY AND NON-DISCLOSURE</h2>
                <p>6.1 The User agrees to hold all Confidential Information in strict confidence and trust and to use the same degree of care as the User uses to protect its own confidential information of a similar nature, but in no event less than reasonable care.</p>
                <p>6.2 The User shall not disclose Confidential Information to any person except those authorized to receive it and only for the Authorized Purpose.</p>
                <p>6.3 The User shall not disclose the existence of confidential reports, supporter classifications, internal dashboards, strategy data, or any derived information except as authorized in writing by an administrator.</p>
                <p>6.4 <strong>Exceptions.</strong> The confidentiality obligations do not apply to information the User can demonstrate:</p>
                <p>(a) was lawfully in the User's possession without confidentiality restrictions before access to the App;</p>
                <p>(b) becomes publicly available through no breach of this Agreement; or</p>
                <p>(c) is received from a third party without restriction on disclosure and without breach of any obligation.</p>

                <hr>

                <h2>7. PERSONAL INFORMATION AND PRIVACY OBLIGATIONS</h2>
                <p>7.1 The User acknowledges that Personal Information may be stored and processed within the App and may be subject to Canadian privacy laws, including applicable provincial privacy legislation.</p>
                <p>7.2 The User agrees Personal Information may only be used for the Authorized Purpose and must not be used for commercial purposes.</p>
                <p>7.3 The User must take reasonable safeguards to prevent unauthorized access, use, disclosure, loss, or disposal of Personal Information.</p>
                <p>7.4 Where the User uploads, imports, enters, or modifies Personal Information, the User represents and warrants they have lawful authority to do so for the Authorized Purpose.</p>

                <hr>

                <h2>8. SECURITY MONITORING AND AUDIT LOGS (CONSENT)</h2>
                <p>8.1 The User acknowledges and agrees that Campaign Builder and/or its service providers may collect and store App usage information for security, accountability, and support, including:</p>
                <ul class="list-disc">
                    <li>login history and authentication attempts</li>
                    <li>actions performed (searches, edits, exports, uploads, communications)</li>
                    <li>access to records and system events</li>
                    <li>device, browser, and session metadata</li>
                </ul>
                <p>8.2 The User consents to such collection, storage, use, and disclosure strictly for system security, incident investigation, compliance auditing, support, and enforcement of this Agreement.</p>

                <hr>

                <h2>9. NO GUARANTEE OF CONFIDENTIALITY ON THE INTERNET</h2>
                <p>9.1 The User acknowledges that while Campaign Builder intends to use commercially reasonable safeguards (which may include encryption and access controls), no system can guarantee absolute security or confidentiality.</p>
                <p>9.2 The User is responsible for protecting credentials and devices and for promptly reporting suspected unauthorized access.</p>

                <hr>

                <h2>10. TERMINATION OF ACCESS</h2>
                <p>10.1 This Agreement remains in effect from the moment the User accepts it and continues until terminated by Campaign Builder or an authorized administrator, with or without cause, in their sole discretion.</p>
                <p>10.2 Access may be terminated immediately if the User breaches this Agreement or is no longer authorized.</p>
                <p>10.3 Upon termination, the User must immediately stop accessing the App and must not retain copies of any Confidential Information.</p>
                <p>10.4 Sections regarding confidentiality, privacy, restrictions, limitation of liability, indemnity, and governing law survive termination.</p>

                <hr>

                <h2>11. DISCLAIMER AND LIMITATION OF LIABILITY</h2>
                <p>11.1 The App is provided "as is" and "as available," without warranties of any kind, express or implied, including accuracy, completeness, fitness for a particular purpose, uninterrupted service, or error-free operation.</p>
                <p>11.2 To the maximum extent permitted by law, Campaign Builder is not liable for indirect, incidental, punitive, exemplary, aggravated, economic, or consequential damages, including loss of data, service interruption, or third-party claims.</p>

                <hr>

                <h2>12. INDEMNITY</h2>
                <p>12.1 The User agrees to indemnify, defend, and hold harmless Campaign Builder and its service providers, directors, officers, employees, and agents from and against any claims, damages, liabilities, costs, and expenses (including reasonable legal fees) arising from:</p>
                <p>(a) breach of this Agreement;</p>
                <p>(b) misuse or unauthorized disclosure of Confidential Information or Personal Information;</p>
                <p>(c) unlawful actions performed through the User's account; or</p>
                <p>(d) content or data the User uploads, imports, or transmits.</p>

                <hr>

                <h2>13. GOVERNING LAW</h2>
                <p>13.1 This Agreement is governed by the laws of the Province of British Columbia and the applicable federal laws of Canada.</p>
                <p>13.2 The parties submit to the non-exclusive jurisdiction of the courts of British Columbia.</p>

                <hr>

                <h2>14. ENTIRE AGREEMENT; UPDATES</h2>
                <p>14.1 This Agreement constitutes the entire agreement regarding the User's access to and use of the App.</p>
                <p>14.2 Campaign Builder may update this Agreement from time to time. Updated terms will be presented within the App, and continued access may require renewed acceptance.</p>

                <hr>

                <h2>15. SEVERABILITY</h2>
                <p>15.1 If any provision is found invalid or unenforceable, the remaining provisions remain in full force and effect and shall be enforced to the maximum extent permitted by law.</p>

                <hr>

                <h2>16. ELECTRONIC ACCEPTANCE</h2>
                <p>16.1 By clicking <strong>"I Agree"</strong>, the User confirms they:</p>
                <p>(a) have read and understood this Agreement;</p>
                <p>(b) agree to be legally bound by it;</p>
                <p>(c) are authorized to access Campaign Builder; and</p>
                <p>(d) acknowledge that unauthorized access, copying, or disclosure may result in termination, legal action, and regulatory consequences.</p>
            </div>
            
            <!-- Acceptance Section -->
            <div class="border-t pt-4 sm:pt-6">
                <form id="ndaForm" class="space-y-4">
                    <div class="flex items-start">
                        <input type="checkbox" id="agreeCheckbox" class="mt-0.5 sm:mt-1 h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 flex-shrink-0" required>
                        <label for="agreeCheckbox" class="ml-2 sm:ml-3 text-gray-700 text-sm sm:text-base">
                            I confirm I am authorized to access Campaign Builder and I agree to the Access, Confidentiality, Non-Disclosure & Privacy Agreement.
                        </label>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4">
                        <button type="submit" id="agreeBtn" disabled class="flex-1 bg-indigo-600 text-white py-3 px-4 sm:px-6 rounded-lg font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm sm:text-base">
                            I Agree (Continue)
                        </button>
                        <button type="button" id="declineBtn" class="flex-1 bg-gray-200 text-gray-700 py-3 px-4 sm:px-6 rounded-lg font-semibold hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors text-sm sm:text-base">
                            Decline (Exit)
                        </button>
                    </div>
                </form>
                
                <p class="text-xs text-gray-500 text-center mt-4">
                    Your acceptance will be recorded with a timestamp for compliance purposes.
                </p>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="text-center mt-6 text-sm text-gray-500">
            <p>&copy; <%= new Date().getFullYear() %> Campaign Builder. All rights reserved.</p>
        </div>
    </div>
    
    <script>
        const checkbox = document.getElementById('agreeCheckbox');
        const agreeBtn = document.getElementById('agreeBtn');
        const declineBtn = document.getElementById('declineBtn');
        const form = document.getElementById('ndaForm');
        
        // Enable/disable agree button based on checkbox
        checkbox.addEventListener('change', function() {
            agreeBtn.disabled = !this.checked;
        });
        
        // Handle form submission (agree)
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!checkbox.checked) {
                alert('Please check the agreement checkbox to continue.');
                return;
            }
            
            agreeBtn.disabled = true;
            agreeBtn.textContent = 'Processing...';
            
            try {
                const response = await fetch('/api/accept-nda', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Redirect to dashboard on success
                    window.location.href = '/dashboard';
                } else {
                    alert(data.error || 'Failed to accept agreement. Please try again.');
                    agreeBtn.disabled = false;
                    agreeBtn.textContent = 'I Agree (Continue)';
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
                agreeBtn.disabled = false;
                agreeBtn.textContent = 'I Agree (Continue)';
            }
        });
        
        // Handle decline
        declineBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to decline? You will be logged out and will not be able to use Campaign Builder until you accept the agreement.')) {
                // Clear cookies and redirect to login
                document.cookie = 'token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                if (window.redirectToLogin) window.redirectToLogin('nda_declined', { from: 'nda-agreement', message: 'nda_declined' });
                else window.location.replace('/login?loop=1&reason=nda_declined&from=nda-agreement&message=nda_declined');
            }
        });
    </script>
</body>
</html>
